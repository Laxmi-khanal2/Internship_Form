@using InternshipForm.Views.ViewModel﻿
@model CompanyFormViewModel

<h2>Applied Students for Internship</h2>
<div class="card">
    @if (Model != null &&  Model.PersonalInformation.Any())
    {
        <div class="row">
            @for(var i=0; i< Model.PersonalInformation.Count; i++)
            {
                var student = Model.PersonalInformation[i];
                var internship = Model.CreateInternship;
                var cardColorClass = "";
                if (student.Status == "Shortlisted")
                {
                    cardColorClass = "shortlisted";
                }
                else if (student.Status == "Rejected")
                {
                    cardColorClass = "rejected";
                }

                <div class="col-md-4 mb-4">
                    <div class="card @cardColorClass">
                        <div class="card-body">
                           @*  <h5 class="card-title"> @internship.TitleOfInternship</h5> *@
                            <h5 class="card-title">@student.FirstName @student.LastName</h5>
                            <p class="card-text">Email: @student.Email</p>
                            <p class="card-text">Phone: @student.HomePhoneNumber</p>
                            <!-- Other student details -->
                            <!-- Form to update application status -->
                            <form method="post" action="@Url.Action("UpdateApplicationStatus", "Company")">
                                <input type="hidden" name="InternId" value="@student.InternId" />
                                <button type="submit" name="status" value="Shortlisted">Shortlist</button>
                                <button type="submit" name="status" value="Rejected">Reject</button>
                            </form>
                        </div>
                    </div>
                </div>
            }
        </div>
    }
    else
    {
        <p>No students have applied for this internship yet.</p>
    }
</div>