@using InternshipForm.ViewModel
@model InternshipFormViewModel
@{
    ViewData["Title"] = "Create";
    Layout = "~/Views/Shared/AdminLTEStudent/_Layout.cshtml";
}

<link href="https://nepalidatepicker.sajanmaharjan.com.np/nepali.datepicker/css/nepali.datepicker.v4.0.1.min.css"
      rel="stylesheet" type="text/css" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
<link href="~/plugins/jquery-ui/jquery-ui.structure.css" rel="stylesheet" />
<link href="~/plugins/jquery-ui/jquery-ui.structure.min.css" rel="stylesheet" />
<link href="~/plugins/jquery-ui/jquery-ui.structure.css" rel="stylesheet" />
<a href="~/plugins/bs-stepper/js/bs-stepper.js.map"></a>
<a href="~/plugins/bs-stepper/js/bs-stepper.min.js.map"></a>
<link href="~/plugins/fontawesome-free/css/all.min.css" rel="stylesheet" />
<link href="~/plugins/fontawesome-free/css/all.css" rel="stylesheet" />
<a href="~/plugins/bs-stepper/css/bs-stepper.css.map"></a>
<a href="~/plugins/bs-stepper/css/bs-stepper.min.css.map"></a>
<link href="~/plugins/bs-stepper/css/bs-stepper.min.css" rel="stylesheet" />
<link href="~/plugins/bs-stepper/css/bs-stepper.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />


<style>
    .MainHeading {
        background-color: cornflowerblue !important;
        color: white !important;
    }

    .form-check-input {
        position: absolute;
        margin-top: 0.3rem;
        margin-left: 1rem;
    }

    .text-red {
        color: red;
    }

    .card {
        box-shadow: 5px 4px 8px 0 rgba(0, 0, 0, 0.2);
        transition: 0.3s;
        width: 80%;
        margin: auto;
        margin-top: 50px;
        padding: 20px;
    }

    /* .card-header {
                                background-color: cornflowerblue;
                                color: white;
                            }

                            .float-right {
                                float: right;
                            } */
</style>
<div class="table-responsive ">
    <form method="post" enctype="multipart/form-data" asp-controller="Student" asp-action="Create">
        <div class="row">

            <div class="col-md-12">
                <div class="card card-default">
                    <div class="card-header">

                        <h3 class="card-title"> <i class="fa-solid fa-user"></i> Personal Informations</h3>

                    </div>
                    <div class="card-body p-0">
                        <div class="bs-stepper">
                            <div class="bs-stepper-header" role="tablist">
                                <!-- your steps here -->
                                <div class="step" data-target="#logins-part">
                                    <button type="button" class="step-trigger" role="tab" aria-controls="logins-part" id="logins-part-trigger">
                                        <span class="bs-stepper-circle">1</span>
                                        <span class="bs-stepper-label">Personal Information</span>
                                    </button>
                                </div>
                                <div class="line"></div>
                                <div class="step" data-target="#education-part">
                                    <button type="button" class="step-trigger" role="tab" aria-controls="education-part" id="education-part-trigger">
                                        <span class="bs-stepper-circle">2</span>
                                        <span class="bs-stepper-label">Education</span>
                                    </button>
                                </div>

                                <!-- Step trigger for Guardian Details -->
                                <div class="line"></div>
                                <div class="step" data-target="#GuardianDetails-part">
                                    <button type="button" class="step-trigger" role="tab" aria-controls="GuardianDetails-part" id="GuardianDetails-part-trigger">
                                        <span class="bs-stepper-circle">3</span>
                                        <span class="bs-stepper-label">Guardian Details</span>
                                    </button>
                                </div>
                                <div class="line"></div>
                                <div class="step" data-target="#OfficialUse-part">
                                    <button type="button" class="step-trigger" role="tab" aria-controls="OfficialUse-part" id="OfficialUse-part-trigger">
                                        <span class="bs-stepper-circle">4</span>
                                        <span class="bs-stepper-label">OfficialUse</span>
                                    </button>

                                </div>
                                <div class="line"></div>
                                <div class="step" data-target="#References-part">
                                    <button type="button" class="step-trigger" role="tab" aria-controls="References-part" id="References-part-trigger">
                                        <span class="bs-stepper-circle">5</span>
                                        <span class="bs-stepper-label">References</span>
                                    </button>

                                </div>
                                
                            </div>
                            <div class="bs-stepper-content">
                                <!-- your steps content here -->
                                <div id="logins-part" class="content " role="tabpanel" aria-labelledby="logins-part-trigger">

                                    <table style="width:100%" class="table table-hover">

                                        <tr>
                                            <th class="MainHeading" colspan="6"> Personal Information </th>

                                        </tr>
                                    </table>

                                    <div class="row">

                                        <div class="col-md-4">
                                            @Html.HiddenFor(x => x.PersonalInformation.InternId)
                                            @Html.LabelFor(x => x.PersonalInformation.FirstName)
                                            @Html.TextBoxFor(x => x.PersonalInformation.FirstName, new { @class = "form-control" })
                                            @Html.ValidationMessageFor(x => x.PersonalInformation.FirstName, "", new { @class = "text-red" })
                                        </div>

                                        <div class="col-md-4">
                                            @Html.LabelFor(X => X.PersonalInformation.MiddleName)
                                            @Html.TextBoxFor(x => x.PersonalInformation.MiddleName, new { @class = "form-control" })

                                        </div>


                                        <div class="col-md-4">
                                            @Html.LabelFor(X => X.PersonalInformation.LastName)
                                            @Html.TextBoxFor(x => x.PersonalInformation.LastName, new { @class = "form-control", type = "string" })
                                            @Html.ValidationMessageFor(x => x.PersonalInformation.LastName, "", new { @class = "text-red" })
                                        </div>

                                        <br />


                                        <div class="col-md-2">
                                            @Html.LabelFor(X => X.PersonalInformation.ProvienceId)
                                            @Html.TextBoxFor(x => x.PersonalInformation.ProvienceId, new { @class = "form-control", type = "string" })
                                            @Html.ValidationMessageFor(x => x.PersonalInformation.ProvienceId, "", new { @class = "text-red" })
                                        </div>


                                        <div class="col-md-3">
                                            @Html.LabelFor(X => X.PersonalInformation.DistrictId)
                                            @Html.TextBoxFor(x => x.PersonalInformation.DistrictId, new { @class = "form-control", type = "string" })
                                            @Html.ValidationMessageFor(x => x.PersonalInformation.DistrictId, "", new { @class = "text-red" })
                                        </div>
                                        <div class="col-md-3">
                                            @Html.LabelFor(X => X.PersonalInformation.MuniId)
                                            @Html.TextBoxFor(x => x.PersonalInformation.MuniId, new { @class = "form-control", type = "" })
                                            @Html.ValidationMessageFor(x => x.PersonalInformation.MuniId, "", new { @class = "text-red" })
                                        </div>
                                        <div class="col-md-2">
                                            @Html.LabelFor(X => X.PersonalInformation.Tole)
                                            @Html.TextBoxFor(x => x.PersonalInformation.Tole, new { @class = "form-control" })
                                        </div>
                                        <div class="col-md-2">
                                            @Html.LabelFor(X => X.PersonalInformation.Ward)
                                            @Html.TextBoxFor(x => x.PersonalInformation.Ward, new { @class = "form-control", type = "number" })
                                        </div>
                                        <br />

                                        <div class="col-md-4">

                                            @Html.LabelFor(X => X.PersonalInformation.HomePhoneNumber)
                                            @Html.TextBoxFor(x => x.PersonalInformation.HomePhoneNumber, new { @class = "form-control", type = "number", placeholder = "Enter Home PhoneNumber" })
                                        </div>

                                        <div class="col-md-4">
                                            @Html.LabelFor(X => X.PersonalInformation.Mobile)
                                            @Html.TextBoxFor(x => x.PersonalInformation.Mobile, new { @class = "form-control", type = "number", placeholder = "Enter your phone number" })
                                            @Html.ValidationMessageFor(x => x.PersonalInformation.Mobile, "", new { @class = "text-red" })
                                        </div>

                                        <div class="col-md-4">

                                            @Html.LabelFor(X => X.PersonalInformation.CitizenshipNo)
                                            @Html.TextBoxFor(x => x.PersonalInformation.CitizenshipNo, new { @class = "form-control" })
                                            @Html.ValidationMessageFor(x => x.PersonalInformation.CitizenshipNo, "", new { @class = "text-red" })
                                        </div>
                                        <br />


                                        <div class="col-md-6">
                                            @Html.LabelFor(X => X.PersonalInformation.Email)
                                            @Html.TextBoxFor(x => x.PersonalInformation.Email, new { @class = "form-control", placeholder = "Enter your Email" })
                                            @Html.ValidationMessageFor(x => x.PersonalInformation.Email, "", new { @class = "text-red" })
                                        </div>

                                        <div class="col-md-6">
                                            <br />
                                            @Html.LabelFor(X => X.PersonalInformation.HasLicence)
                                            @Html.CheckBoxFor(x => x.PersonalInformation.HasLicence, new { @class = "form-check-input" })

                                        </div>

                                    </div>
                                    <button type="button" class="btn btn-primary" onclick="stepper.next()">Next</button>
                                </div>
                            </div>

                            <div id="education-part" class="content" role="tabpanel" aria-labelledby="education-part-trigger">
                                <div class="form-group">
                                    <table style="width:100%" class="table table-hover">

                                        <tr>
                                            <th class="MainHeading" colspan="6"> Education </th>

                                        </tr>
                                    </table>
                                    <table style="width:100%" class="table table-bordered">
                                        <tr colspan="6">
                                        <thead>


                                            <tr>
                                                <th> @Html.Label("School/CollegeName")</th>

                                                <th>@Html.Label("Address") </th>
                                                <th>@Html.Label("StartYear") </th>
                                                <th>@Html.Label("CompletionYear")</th>
                                                <th>@Html.Label("Major")</th>
                                                <th> Action</th>
                                            </tr>
                                        </thead>



                                        <tbody id="tableEducation">
                                                @for (int i = 0; i < Model.Education.Count; i++)
                                                {


                                                <tr>
                                                    <td>
                                                            @Html.HiddenFor(x => x.Education[i].Id)
                                                            @Html.TextBoxFor(X => X.Education[i].SchoolOrCollegeName, new { @class = "" })
                                                            @Html.ValidationMessageFor(x => x.Education[i].SchoolOrCollegeName, "", new { @class = "text-red" })
                                                    </td>


                                                    <td>
                                                            @Html.TextBoxFor(X => X.Education[i].Address)
                                                            @Html.ValidationMessageFor(x => x.Education[i].Address, "", new { @class = "text-red" })
                                                    </td>
                                                    <td>
                                                            @Html.TextBoxFor(X => X.Education[i].StartYear, new { @class = "datepicker" })
                                                            @* @Html.ValidationMessageFor(x => x.Education[i].StartYear, "", new { @class = "text-red" }) *@
                                                    </td>
                                                    <td>
                                                            @Html.TextBoxFor(X => X.Education[i].CompletionYear, new { @class = "datepicker" })
                                                            @*   @Html.ValidationMessageFor(x => x.Education[i].CompletionYear, "", new { @class = "text-red" }) *@
                                                    </td>
                                                    <td>
                                                            @Html.TextBoxFor(X => X.Education[i].Major)
                                                            @Html.ValidationMessageFor(x => x.Education[i].Major, "", new { @class = "text-red" })
                                                    </td>
                                                    <td>
                                                            @*   <button type="button" class="deletebtn" title="Remove row">Delete</button> *@

                                                    </td>
                                                </tr>
                                                }
                                        </tbody>



                                    </table>

                                    <button class="btn btn-md btn-primary" id="newbtn" type="button"> Add </button>

                                    <button type="button" class="btn btn-primary" onclick="stepper.previous()">Previous</button>
                                    <button type="button" class="btn btn-primary" onclick="stepper.next()">Next</button>

                                </div>
                            </div>


                            <div id="GuardianDetails-part" class="content" role="tabpanel" aria-labelledby="GuardianDetails-part-trigger">
                                <table style="width:100%" class="table table-hover">
                                    <tr>
                                        <th class="MainHeading" colspan="6"> Guardian Details </th>
                                    </tr>
                                </table>
                                <table style="width:100%" class="table table-bordered">
                                    <tr colspan="6"></tr>
                                    <tr>
                                        <th>@Html.Label("Name") </th>
                                        <th>@Html.Label("Relation") </th>
                                        <th>@Html.Label("Address") </th>
                                        <th>@Html.Label("Phone No")</th>
                                        <th>@Html.Label("Signature")</th>
                                    </tr>
                                    <tr>
                                        <td>
                                            @Html.HiddenFor(x => x.GuardianDetails.Id)
                                            @Html.TextBoxFor(x => x.GuardianDetails.Name)
                                            @Html.ValidationMessageFor(x => x.GuardianDetails.Name, "", new { @class = "text-red" })
                                        </td>
                                        <td>
                                            @Html.TextBoxFor(x => x.GuardianDetails.Relation)
                                            @Html.ValidationMessageFor(x => x.GuardianDetails.Relation, "", new { @class = "text-red" })
                                        </td>
                                        <td>
                                            @Html.TextBoxFor(x => x.GuardianDetails.Address)
                                            @Html.ValidationMessageFor(x => x.GuardianDetails.Address, "", new { @class = "text-red" })
                                        </td>
                                        <td>
                                            @Html.TextBoxFor(x => x.GuardianDetails.PhoneNumber, new { @class = "", type = "number" })
                                            @Html.ValidationMessageFor(x => x.GuardianDetails.PhoneNumber, "", new { @class = "text-red" })
                                        </td>
                                        <td>
                                            @Html.TextBoxFor(x => x.GuardianDetails.Signature)
                                            @Html.ValidationMessageFor(x => x.GuardianDetails.Signature, "", new { @class = "text-red" })
                                        </td>
                                    </tr>
                                </table>
                                <button type="button" class="btn btn-primary" onclick="stepper.previous()">Previous</button>
                                <button type="button" class="btn btn-primary" onclick="stepper.next()">Next</button>
                              
                            </div>
                            <div id="OfficialUse-part" class="content " role="tabpanel" aria-labelledby="OfficialUse-part-trigger">

                                <table style="width:100%" class="table table-hover">

                                    <tr>
                                        <th class="MainHeading" colspan="6"> Official Use</th>

                                    </tr>
                                </table>

                                <div class="row">

                                    <div class="col-md-4">
                                        @Html.HiddenFor(x => x.OfficalUse.Id)
                                        @Html.LabelFor(x => x.OfficalUse.InternshipFor)
                                        @Html.TextBoxFor(x => x.OfficalUse.InternshipFor, new { @class = "form-control" })
                                        @Html.ValidationMessageFor(x => x.OfficalUse.InternshipFor, "", new { @class = "text-red" })
                                    </div>

                                    <div class="col-md-4">
                                        @Html.LabelFor(X => X.OfficalUse.certilice)
                                        @Html.TextBoxFor(x => x.OfficalUse.certilice, new { @class = "form-control" })

                                    </div>

                                </div>
                                <br/>
                                <button type="button" class="btn btn-primary" onclick="stepper.previous()">Previous</button>
                                <button type="button" class="btn btn-primary" onclick="stepper.next()">Next</button>
                            </div>



                            <div id="References-part" class="content" role="tabpanel" aria-labelledby="References-part-trigger">
                                <div class="form-group">
                                    <table style="width:100%" class="table table-hover">

                                        <tr>
                                            <th class="MainHeading" colspan="6"> References </th>

                                        </tr>
                                    </table>
                                    <table style="width:100%" class="table table-bordered">
                                        <tr colspan="6">

                                            <th>@Html.Label("Name") </th>
                                            <th>@Html.Label("Position") </th>
                                            <th>@Html.Label("College/Company") </th>
                                            <th>@Html.Label("Phone ")</th>
                                            <th>@Html.Label("Signature")</th>

                                        </tr>
                                        <tr>
                                            @Html.HiddenFor(x => x.References.Id)
                                            <td> @Html.TextBoxFor(x => x.References.Name)</td>
                                            <td> @Html.TextBoxFor(x => x.References.Positions)</td>
                                            <td> @Html.TextBoxFor(x => x.References.CollegeorCompany)</td>
                                            <td> @Html.TextBoxFor(x => x.References.Phone, new { @class = "", type = "number" })</td>
                                            <td> @Html.TextBoxFor(x => x.References.Signature)</td>
                                        </tr>
                                    </table>



                                    <button type="button" class="btn btn-primary" onclick="stepper.previous()">Previous</button>

                                    <input type="submit" id="submitBtn" value="Submit" class="btn btn-primary" />


                                </div>







                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>



    </form>
</div>



<script src="https://nepalidatepicker.sajanmaharjan.com.np/nepali.datepicker/js/nepali.datepicker.v4.0.1.min.js"
        type="text/javascript"></script>



<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
        integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"> </script>
<script src="~/plugins/jquery-ui/jquery-ui.min.js"></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>


<script src="~/plugins/bs-stepper/js/bs-stepper.js"></script>


<script>
    document.addEventListener('DOMContentLoaded', function () {
        debugger;
        window.stepper = new Stepper(document.querySelector('.bs-stepper'))
    })
    // document.getElementById('submitBtn').addEventListener('click', function () {
    //     // Submit the form when the button is clicked
    //     document.querySelector('form').submit();
    // });
    $(document).ready(function () {

        var x = 1;
        $("#newbtn").click(function () {

            var educationContainer = $("#tableEducation tr:first").clone();
            var removeButton = '<button class="btn btn-md btn-primary deletebtn" type="button" title="Remove row">Delete</button>';

            var fieldCount = $("#tableEducation").children().length;
            console.log(fieldCount);

            educationContainer.find("input").each(function () {

                $(this).val('');
                var oldName = $(this).attr("name");
                console.log(oldName);

                var newName = oldName.replace(0, fieldCount);

                $(this).attr("name", newName);
            });
            educationContainer.find("td:last").append(removeButton);
            educationContainer.appendTo("#tableEducation");
            x++;

        });
        $(document).on('click', 'button.deletebtn', function () {
            $(this).closest('tr').remove();

            $('#tableEducation').children().each(function (index) {

                $(this).find('td input').each(function () {


                    // var oldName = $(this).attr("name");
                    var oldName = $(this).attr("name");

                    var newName = oldName.replace(/\[\d+\]/, '[' + index + ']');
                    $(this).attr("name", newName);


                });


            });

        });
        // for english calender
        // $(".datepicker").datepicker({
        //     dateFormat: "dd-mm-yy",
        //     changemonth: true,
        //     changeyear: true
        // });
        //for nepali calender
        window.onload = function () {
            var mainInput = document.getElementsByClassName("datepicker");
            mainInput.nepaliDatePicker({
                ndpYear: true,
                ndpMonth: true,
                ndpYearCount: 10
            });
        };



    });
</script>




 


